(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,n,t){e.exports=t(59)},57:function(e,n,t){},59:function(e,n,t){"use strict";t.r(n);var r=t(43),a=t(19),o=t(26),s=t(42),l=t(41),i=t(40),c=t(1),u=t.n(c),m=t(35),d=t.n(m),f=t(12),p=t(13),h=t(15),g=t(14),b=t(16),v=t(36);var y=function(e){function n(e){var t;return Object(f.a)(this,n),(t=Object(h.a)(this,Object(g.a)(n).call(this,e))).handleChange=function(e){return t.setState({configUrl:e.target.value})},t.handleSubmit=function(e){e.preventDefault(),fetch(t.state.configUrl).then(function(e){if(!e.ok)throw Error("Request rejected with status ".concat(e.status));return e.json()}).then(function(e){var n=e.repositories,r=e.columns,a=function(e){var n={ok:!1,error:"Unexpected error"};if("undefined"===typeof e)return n.error="No repositories defined",n;if(!Array.isArray(e))return n.error="'repositories' must be an array",n;for(var t=0;t<e.length;++t){var r=e[t].owner,a=e[t].name;if("string"!==typeof r)return n.error="'owner' is not a string for repository at index ".concat(t),n;if(0===r.length)return n.error="'owner' is the empty string for repository at index ".concat(t),n;if("string"!==typeof a)return n.error="'name' is not a string for repository at index ".concat(t),n;if(0===a.length)return n.error="'name' is the empty string for repository at index ".concat(t),n}return n.ok=!0,n.error="",n}(n);a.ok&&(a=function(e){var n={ok:!1,error:"Unexpected error"};if(!Array.isArray(e))return n.error="'columns' must be an array",n;if("undefined"===typeof e)return n.error="No columns defined",n;for(var t=0;t<e.length;++t){var r=e[t].name,a=e[t].state,o=e[t].label;if("string"!==typeof r)return n.error="'name' is not a string for column at index ".concat(t),n;if(0===r.length)return n.error="'name' is the empty string for column at index ".concat(t),n;if("string"!==typeof a)return n.error="'state' is not a string for column at index ".concat(t),n;if("open"!==a&&"closed"!==a)return n.error="'state' must have the value 'open' or 'closed' for column at index ".concat(t),n;if("string"!==typeof o&&null!==o)return n.error="'label' must be a string or null for column at index ".concat(t),n;if("string"===typeof o&&0===o.length)return n.error="'label' is the empty string for column at index ".concat(t),n}return n.ok=!0,n.error="",n}(r)).ok?t.props.onConfig(n,r):alert("".concat(a.error))}).catch(function(e){return alert(e)})},t.state={configUrl:""},t}return Object(b.a)(n,e),Object(p.a)(n,[{key:"render",value:function(){return u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("label",null,"Configuration:",u.a.createElement("input",{type:"text",value:this.configUrl,onChange:this.handleChange})),u.a.createElement("input",{type:"submit",value:"Configure"}))}}]),n}(u.a.Component);var E=function(e){return null===e.url?"unknown":u.a.createElement("img",{src:e.url,alt:"",className:"avatar"})};var O=function(e){function n(){return Object(f.a)(this,n),Object(h.a)(this,Object(g.a)(n).apply(this,arguments))}return Object(b.a)(n,e),Object(p.a)(n,[{key:"render",value:function(){var e=this.props,n=e.number,t=e.repository,r=e.avatarUrl,a=e.title,o=e.labels,s=e.url,l=e.connectedPRs;return u.a.createElement("div",{className:"card"},u.a.createElement("div",{className:"cardHeader"},u.a.createElement("div",{className:"cardNumber"},n),u.a.createElement("div",{className:"cardRepository"},t),u.a.createElement("div",{className:"cardAssignee"},u.a.createElement(E,{url:r}))),u.a.createElement("div",{className:"cardBody"},u.a.createElement("div",{className:"cardTitle"},a)),u.a.createElement("div",{className:"cardFooter"},u.a.createElement("div",{className:"cardLabels"},function(e){return e.edges.map(function(e){var n=e.node,t={padding:"2px",marginLeft:"5px",backgroundColor:"#"+n.color,borderRadius:"5px",height:"20px"};return u.a.createElement("div",{key:n.id,style:t},n.name)})}(o)),u.a.createElement("div",{className:"cardURL"},u.a.createElement("a",{href:s},"github"))),u.a.createElement("div",{className:"cardConnectedPRs"},function(e){return null===e?null:e.map(function(e){return"undefined"===typeof e.repository?null:u.a.createElement("div",{key:e.id,className:"connectedPR"},u.a.createElement("div",{className:"connectedPRNumber"},e.number),u.a.createElement("div",{className:"connectedPRName"},e.repository.nameWithOwner),u.a.createElement("div",{className:"connectedPRURL"},u.a.createElement("a",{href:e.url},"github")))})}(l)))}}]),n}(u.a.Component),j=function(e){function n(){return Object(f.a)(this,n),Object(h.a)(this,Object(g.a)(n).apply(this,arguments))}return Object(b.a)(n,e),Object(p.a)(n,[{key:"render",value:function(){var e=this.props,n=e.name,t=e.issues,r=e.pullRequests,a=t.concat(r);return(a=a.filter(function(e){return null!=e})).sort(function(e,n){return new Date(n.createdAt)-new Date(e.createdAt)}),u.a.createElement("div",{className:"column"},u.a.createElement("h2",null,n),u.a.createElement("div",{className:"columnCards"},a.map(function(e){var n=null;"undefined"!==typeof e.assignees&&e.assignees.edges.length>0&&(n=e.assignees.edges[0].node.avatarUrl);var t=null;return"undefined"!==typeof e.timelineItems&&(t=e.timelineItems.edges.map(function(e){return e.node.source})),u.a.createElement(O,{key:e.id,avatarUrl:n,connectedPRs:t,number:e.number,labels:e.labels,repository:e.repository.nameWithOwner,title:e.title,url:e.url})})))}}]),n}(u.a.Component),R=t(37),N=t.n(R);function k(){var e=Object(v.a)(["\n    query GetIssuesMultiRepo {\n      ","\n    }\n    fragment IssueWithoutRef on Issue {\n      assignees(last:1) {\n        edges {\n          node {\n            avatarUrl\n          }\n        }\n      }\n      createdAt\n      closed\n      id\n      labels(first:10) {\n        edges {\n          node {\n            color\n            id\n            name\n          }\n        }\n      }\n      number\n      repository {\n        nameWithOwner\n      }\n      title\n      url\n    }\n    fragment PullRequestWithoutRef on PullRequest {\n      assignees(last:1) {\n        edges {\n          node {\n            avatarUrl\n          }\n        }\n      }\n      closed\n      createdAt\n      id\n      labels(first:10) {\n        edges {\n          node {\n            color\n            id\n            name\n          }\n        }\n      }\n      number\n      repository {\n        nameWithOwner\n      }\n      title\n      url\n    }\n  "]);return k=function(){return e},e}function w(e,n){return"\n    ".concat(this.repos[n].name,': repository(owner:"').concat(this.repos[n].owner,'", name:"').concat(this.repos[n].name,'") {\n      issues(last:20) {\n        edges {\n          node {\n            ...IssueWithoutRef\n            timelineItems(last:20, itemTypes:CROSS_REFERENCED_EVENT) {\n              edges {\n                node {\n                  ... on CrossReferencedEvent {\n                    source {\n                      ... on PullRequest {\n                        ...PullRequestWithoutRef\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n      pullRequests(last:20, states:OPEN) {\n        edges {\n          node {\n            ...PullRequestWithoutRef\n          }\n        }\n      }\n    }\n  ')}function C(e,n){for(var t=0;t<e.labels.edges.length;++t){if(n===e.labels.edges[t].node.name)return!0}return!1}function q(e){if("open"===this.column.state&&e.closed)return!1;if(null===this.column.label){for(var n in this.column.label)if(C(e,n))return!1;return!0}return C(e,this.column.label)}var x=function(e){function n(e){var t;return Object(f.a)(this,n),(t=Object(h.a)(this,Object(g.a)(n).call(this,e))).updateConfig=function(e,n){var r=t.state.repos,a=t.state.columns,o=t.state.query;null!==e&&(r=e,o=function(e){return N()(k(),Array(e.length).fill().map(w,{repos:e}).join(" "))}(e)),null!==n&&(a=n),t.setState({repos:r,columns:a,query:o})},t.state={repos:[],columns:[],query:null},t}return Object(b.a)(n,e),Object(p.a)(n,[{key:"updateColumns",value:function(){var e=this;return null===this.state.query?null:u.a.createElement(o.b,{query:this.state.query},function(n){var t=n.loading,r=n.error,a=n.data;if(t)return"Loading...";if(r)return"Error: ".concat(r.message);for(var o=e.state.repos,s=e.state.columns,l={},i={},c=0;c<o.length;++c){for(var m=0;m<a[o[c].name].issues.edges.length;++m){var d=a[o[c].name].issues.edges[m].node;l[d.id]=d}for(var f=0;f<a[o[c].name].pullRequests.edges.length;++f){var p=a[o[c].name].pullRequests.edges[f].node;i[p.id]=p}}for(var h in l)for(var g=l[h],b=0;b<g.timelineItems.edges.length;++b){var v=g.timelineItems.edges[b].node.source.id;v in i&&delete i[v]}for(var y={},E=0;E<s.length;++E){var O=s[E];null!==O.label&&(O.label in y&&console.warn("The label ".concat(O.label," is used more than once")),y[O.label]=!0)}var R=e.state.columns.map(function(e,n){return u.a.createElement(j,{key:n.toString(),name:e.name,issues:Object.values(l).filter(q,{labels:y,column:e}),pullRequests:Object.values(i).filter(q,{labels:y,column:e})})});return u.a.createElement("div",{className:"board"},R)})}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement(y,{onConfig:this.updateConfig}),this.updateColumns())}}]),n}(u.a.Component),P=function(e){function n(){return Object(f.a)(this,n),Object(h.a)(this,Object(g.a)(n).apply(this,arguments))}return Object(b.a)(n,e),Object(p.a)(n,[{key:"render",value:function(){return u.a.createElement(x,null)}}]),n}(u.a.Component);t(57);localStorage.setItem("token","04619dfbf08b43723a3430e99d0b5eb3979aace4");var U=Object(s.a)({uri:"https://api.github.com/graphql"}),I=Object(l.a)(function(e,n){var t=n.headers,a=localStorage.getItem("token");return{headers:Object(r.a)({},t,{authorization:a?"Bearer ".concat(a):""})}}),A=new a.c({link:I.concat(U),cache:new i.a});d.a.render(u.a.createElement("div",null,u.a.createElement(o.a,{client:A},u.a.createElement(P,null))),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.4bd56077.chunk.js.map